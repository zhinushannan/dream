---
title: 进程与线程
urlname: 20220609
date: 2022-06-09 08:29:07
tags: [操作系统, 进程, 线程]
categories: [操作系统]
keywords: [操作系统, 进程, 线程]
top_img: /images/java/多线程/1.cover.png
cover: /images/java/多线程/1.cover.png
---

# 进程的引入
## 进程与程序
进程是**可并发执行的程序**在一个**数据集合**上的执行过程。

程序是一个按顺序设计的计算机指令的集合，而进程就是执行这个指令集合的过程。**程序是一个存放在计算机存储空间内的静态文件**。

## 单道程序的顺序执行

### 程序的顺序执行

<img src="/images/操作系统/3进程与线程/1.顺序执行时操作的先后次序.png" style="zoom: 50%;">

顺序执行中，每个程序的执行顺序是严格按照次序先后关系进行的。例如：

![程序段的执行.png](/images/操作系统/3进程与线程/2.程序段的执行.png)

在单道环境中，程序段的执行也是严格按照顺序执行的。


### 顺序执行的特征

1. 顺序性：程序在执行时，严格按照规定的顺序执行。
2. 封闭性：程序是在封闭的环境中执行的，程序在执行时独占系统中的全部资源。
3. 可再现性：当程序被重复执行时，只要初始条件相同，其执行结果必然相同。

应用：这些特征给测试和修改程序带来了很大的方便（debug）。

## 多道程序的并发执行

单道程序系统浪费资源、效率低下，现代操作系统几乎不采用，而广泛采用多道程序设计技术。多道程序设计是在内存中存放多道程序，他们在操作系统的控制下在CPU上交替执行。

### 程序的并发执行
为了提高计算机内各种资源的利用率，提高计算机系统的处理能力，并发处理技术得到广泛的应用。
而有些计算是允许并发执行的，有些操作是需要顺序执行的。
例如，下面两张图中，第一张图的计算是必须按照顺序执行的，而第二张图可以并发执行：
![程序段的执行.png](/images/操作系统/3进程与线程/2.程序段的执行.png)
![并发执行的程序段.png](/images/操作系统/3进程与线程/3.并发执行的程序段.png)

### 并发执行的条件 —— Bernstein

对于两个进程P1、P2，记P1的读集、写集分别为R(P1)、W(P1)，P2的读集、写集为R(P2)、R(P2)，若满足：`R(P1)∩W(P2)∪R(P2)∩W(P1)∪W(P1)∩W(P2)={}`，则P1、P2可以并发执行且具有再现性。

范例:
对于：
P1：    a=5
P2：    b=6
P3：    c=a+b
P4：    d=c+1

的执行图如下：

{% mermaid %}
graph LR
P1 --> P3
p2 --> P3
P3 --> P4
{% endmermaid %}

> P1:  a=5
P2:	  b=6
R(P1)={}		W(P1)={a}
R(P2)={}		W(P2)={b}
R(P1) ∩W(P2)={} 		R(P2) ∩W(P1)={}
W(P1) ∩W(P2)={}
R(P1)∩W(P2)∪R(P2)∩W(P1)∪W(P1)∩W(P2)={}
P1、P2可以并发执行

> P3:	c=a+b
P4:		d=c+1
R(P3)={a,b}		W(P3)={c}
R(P4)={c}			W(P4)={d}
R(P3) ∩ W(P4)={}
R(P4) ∩ W(P3)={c}
R(P3) ∩ W(P4) ∪ R(P4) ∩ W(P3) ∪ W(P3) ∩ W(P4) ={c}
P3、P4不能并发执行

### 程序并发执行的特征
1. 间断性：进程之间需要相互配合，有时需要暂停等待另一个进程执行完毕才可以继续执行。
2. 失去封闭性：多个程序共享系统的各种资源，这些资源的状态由多个程序改变，致使其失去封闭性。
3. 失去可再现性：由于失去了封闭性，系统的资源状态的变化是不可预测的，因而也失去了可再现性。

# 进程的状态及组合
# 进程控制
# 线程

