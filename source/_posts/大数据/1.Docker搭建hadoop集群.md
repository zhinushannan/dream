---
title: Docker搭建Hadoop集群
urlname: 20220625
date: 2022-06-25 08:29:07
tags: [大数据, Hadoop, 集群]
categories: [大数据]
keywords: [大数据, Hadoop, 集群]
top_img: /images/其他/语言类型/cover.png
cover: /images/其他/语言类型/cover.png
---

基于CentOS7的Hadoop

```dockerfile


# 基于哪个镜像
FROM centos:7

# 作者
MAINTAINER zhinushannan<zhinushannan@gmail.com>

# 设置环境变量
ENV ROOT_PASSWORD 12345678

# 配置JDK
# x86 架构
#ADD jdk-8u333-linux-x64.tar.gz /usr/lib/java
# ARM架构
ADD jdk-8u333-linux-aarch64.tar.gz /usr/lib/java
RUN echo -e >> /root/.bashrc && \
    echo 'export JAVA_HOME=/usr/lib/java/jdk1.8.0_333/' >> /root/.bashrc && \
    echo -e >> /root/.bashrc && \
    echo 'export PATH=$PATH:$JAVA_HOME/bin' >> /root/.bashrc && \
    echo -e >> /root/.bashrc 

# 安装openssh-server、openssh-clients、net-tools，并配置ssh登录密码
RUN yum install -y openssh-server openssh-clients net-tools vim && \
    echo $ROOT_PASSWORD | passwd --stdin root && \
    ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key && \
    ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key

# 配置Hadoop环境变量、关闭防火墙、关闭防火墙开机自起
#ADD jdk-8u333-linux-aarch64.tar.gz /usr/lib/hadoop
ADD hadoop-3.3.3.tar.gz /usr/lib/hadoop
RUN echo -e >> /root/.bashrc && \
    echo 'export HADOOP_HOME=/usr/lib/hadoop/hadoop-3.3.3' >> /root/.bashrc && \
    echo -e >> /root/.bashrc && \
    echo 'export PATH=$HADOOP_HOME/bin:$PATH' >> /root/.bashrc && \
    echo -e >> /root/.bashrc && \
    echo 'export PATH=$HADOOP_HOME/sbin:$PATH' >> /root/.bashrc && \
    echo -e >> /root/.bashrc 

# 容器启动时，启动sshd服务
CMD ["/usr/sbin/sshd", "-D"]

# 监听22端口
EXPOSE 22


```

ssh-keygen -f /Users/zhinushannan/.ssh/known_hosts -R 172.17.0.2 
ssh root@172.17.0.2 
docker run -d centos_ssh 

